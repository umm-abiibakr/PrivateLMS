@model PrivateLMS.ViewModels.Step4ViewModel
@{
    ViewData["Title"] = "Step 4: Confirmation";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Step 4: Confirmation & Agreement</h2>
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-body p-4">
                    <form asp-action="Step4" asp-controller="Registration" method="post" novalidate>
                        <div asp-validation-summary="All" class="text-danger mb-3"></div>

                        <div class="form-check mb-4">
                            <input asp-for="TermsAccepted" class="form-check-input" type="checkbox" id="TermsAccepted" aria-label="Accept terms and conditions" />
                            <label asp-for="TermsAccepted" class="form-check-label" for="TermsAccepted">
                                I understand and accept the
                                <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">terms and conditions</a>
                                and <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">privacy policy</a>.
                            </label>
                            </label>
                            <span asp-validation-for="TermsAccepted" class="text-danger d-block small"></span>
                        </div>

                        <div class="text-end mt-3">
                            <a asp-action="Step3" asp-controller="Registration" class="btn btn-outline-secondary rounded-3 me-2">Back</a>
                            <button type="submit" class="btn btn-success rounded-3">Complete Registration</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Terms Modal -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content rounded-4">
            <div class="modal-header">
                <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" aria-label="Close terms modal"></button>
            </div>
            <div class="modal-body">
                <h2 class="text-center mb-4">Terms and Conditions</h2>
                <div class="card shadow-sm p-4 rounded-4">
                    <h4 class="mb-3">Warathatul Ambiya Library</h4>
                    <p><strong>Effective Date:</strong> 1/1447 AH &nbsp; | &nbsp; ≈ @DateTime.Now.ToString("MMMM yyyy") CE</p>

                    <p>
                        By applying for membership or accessing the resources of <strong>Warathatul Ambiya</strong>,
                        a private library located in Abuja, Nigeria, you agree and promise to abide by the following
                        Terms and Conditions. These terms protect the integrity of our collection and support our mission
                        to serve sincere seekers of knowledge, <em class="arabic-phrase">bi idhnillāh</em>.
                    </p>

                    <h5 class="mt-4">1. Membership Eligibility</h5>
                    <ul>
                        <li>Membership is exclusive to individuals residing in the Abuja area with a commitment to Islamic knowledge.</li>
                        <li>Applicants must submit a formal application with accurate personal information (name, address, contact details).</li>
                        <li>Applications are reviewed by our team. Approval is at the sole discretion of Warathatul Ambiya.</li>
                        <li>Incomplete or false information will result in rejection.</li>
                        <li>Membership is non-transferable and limited to the approved individual.</li>
                    </ul>

                    <h5 class="mt-4">2. Borrowing Privileges</h5>
                    <ul>
                        <li>Borrowing is limited to approved Abuja-based members to ensure preservation.</li>
                        <li>Each loan is an <em class="arabic-phrase">amaanah</em> (a trust); members must fear Allah in handling the books.</li>
                        <li>Books may be borrowed for 3 weeks, with a one-week extension upon request.</li>
                        <li>Members may not lend books on behalf of others or pass them to non-members.</li>
                        <li>Books must be returned in their original condition and may not leave the Abuja area.</li>
                    </ul>

                    <h5 class="mt-4">3. Use of Library Resources</h5>
                    <ul>
                        <li>The collection is for personal study and research only.</li>
                        <li>Books must be treated with care—no marking, defacing, or altering.</li>
                        <li>A recommendation system is provided to assist members in selecting relevant texts.</li>
                    </ul>

                    <h5 class="mt-4">4. Code of Conduct</h5>
                    <ul>
                        <li>Members must observe Islamic etiquette and show respect to the staff, resources, and fellow members.</li>
                        <li>Disruptive or harmful behavior may result in membership termination.</li>
                        <li>Each member is accountable for safeguarding any material borrowed, as an <em class="arabic-phrase">amaanah</em>.</li>
                    </ul>

                    <h5 class="mt-4">5. Termination of Membership</h5>
                    <ul>
                        <li>Membership may be revoked for late returns, damage, dishonesty, or misconduct.</li>
                        <li>Terminated members must immediately return all materials and may be charged for damages or losses.</li>
                    </ul>

                    <h5 class="mt-4">6. Limitation of Liability</h5>
                    <ul>
                        <li>The library is not liable for any loss, damage, or injury related to its resources or premises.</li>
                        <li>Recommendations are provided in good faith and may not meet every user’s specific needs.</li>
                    </ul>

                    <h5 class="mt-4">7. Amendments</h5>
                    <ul>
                        <li>Terms may be updated as needed. Members will be notified via email or library announcements.</li>
                        <li>Continued membership implies acceptance of the revised terms.</li>
                    </ul>

                    <h5 class="mt-4">8. Contact Information</h5>
                    <ul>
                        <li>For inquiries or issues, email us at <a href="mailto:admin@warathatulambiya.com" aria-label="Email admin">admin@warathatulambiya.com</a>.</li>
                        <li>Include your full name and contact details for verification.</li>
                    </ul>

                    <h5 class="mt-4">9. Account Security and Usage</h5>
                    <ul>
                        <li>Each member is responsible for maintaining the confidentiality of their login credentials.</li>
                        <li>Sharing accounts or impersonating another member is strictly prohibited.</li>
                        <li>Any unauthorized access or suspicious activity must be reported immediately.</li>
                    </ul>

                    <h5 class="mt-4">10. Digital Content and AI Recommendations</h5>
                    <ul>
                        <li>Book suggestions provided via the recommendation system are based on member preferences and system algorithms.</li>
                        <li>These suggestions are for assistance only and do not reflect scholarly endorsement.</li>
                        <li>Digital features are provided as-is and may occasionally contain errors or outdated information.</li>
                    </ul>

                    <h5 class="mt-4">11. Intellectual Property</h5>
                    <ul>
                        <li>All system content including book data, layouts, and features are the intellectual property of Warathatul Ambiya Library unless otherwise stated.</li>
                        <li>Members may not reproduce, redistribute, or extract content without prior written permission.</li>
                    </ul>

                    <p class="mt-4">
                        By applying for or maintaining membership, you acknowledge that you have read, understood,
                        and agree to these Terms and Conditions. Your continued use of the library services confirms
                        your consent to abide by these terms. Warathatul Ambiya is committed to preserving its
                        scholarly legacy and serving its community, <em class="arabic-phrase">bi idhnillāh</em>.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded-3" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Privacy Policy Modal -->
<div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content rounded-4">
            <div class="modal-header">
                <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" aria-label="Close privacy policy modal"></button>
            </div>
            <div class="modal-body">
                    <h4 class="mb-3">Warathatul Ambiya</h4>
                    <p><strong>Effective Date:</strong> 1/1447 AH | ≈ @DateTime.Now.ToString("MMMM yyyy") CE</p>

                    <p>
                        Warathatul Ambiya is a personal platform designed to manage a curated collection of Islamic books. This Privacy Policy explains how we collect, use, and protect the information provided by registered members—preserving trust and integrity in line with Islamic principles, <em class="arabic-phrase">bi idhnillāh</em>.
                    </p>

                    <h5 class="mt-4">1. Information We Collect</h5>
                    <ul>
                        <li><strong>User Accounts:</strong> Full name, email, address, location details, and gender.</li>
                        <li><strong>Loan Records:</strong> Borrowed books, due dates, return status, renewals, and overdue history.</li>
                        <li><strong>Recommendation Preferences:</strong> Author, language, and category preferences stored to personalize recommendations.</li>
                        <li><strong>Activity Logs:</strong> Login history, profile updates, system interactions.</li>
                        <li><strong>Contact Requests:</strong> Submitted queries or feedback via the built-in chatbot or email.</li>
                    </ul>

                    <h5 class="mt-4">2. How We Use Your Information</h5>
                    <ul>
                        <li><strong>Library Services:</strong> Manage loans, track borrowing status, and process renewals or returns.</li>
                        <li><strong>Personalized Recommendations:</strong> Suggest books based on user preferences using AI.</li>
                        <li><strong>Notifications:</strong> Inform users about overdue items, approvals, or important system updates.</li>
                        <li><strong>Security:</strong> Monitor usage patterns and prevent unauthorized access.</li>
                    </ul>

                    <h5 class="mt-4">3. Data Sharing and Disclosure</h5>
                    <ul>
                        <li>We do not share personal data with external third parties.</li>
                        <li>Data may only be accessed by system administrators to manage core operations securely.</li>
                        <li>Information may be disclosed only if required by law or to address loss/damage of books.</li>
                    </ul>

                    <h5 class="mt-4">4. Data Security</h5>
                    <ul>
                        <li>All data is stored in a protected database with encryption and role-based access control.</li>
                        <li>Admins and users are advised to keep login credentials secure.</li>
                        <li>In the event of a security breach, affected users will be notified via email or system alerts.</li>
                    </ul>

                    <h5 class="mt-4">5. Data Retention</h5>
                    <ul>
                        <li>We retain user data only as long as the account remains active or as needed for legal or audit purposes.</li>
                        <li>Former users’ loan and activity history may be stored briefly to resolve pending matters.</li>
                    </ul>

                    <h5 class="mt-4">6. Your Rights</h5>
                    <ul>
                        <li>Users can request profile updates or corrections through their account profile.</li>
                        <li>For other requests, email <a href="mailto:admin@warathatulambiya.com" aria-label="Email admin">admin@warathatulambiya.com</a> with your full name and contact details.</li>
                        <li>We will respond within a reasonable timeframe, in shā’ Allāh.</li>
                    </ul>

                    <h5 class="mt-4">7. Updates to This Policy</h5>
                    <ul>
                        <li>We may revise this Privacy Policy periodically to reflect system or legal updates.</li>
                        <li>Changes will be communicated via the website or email notification.</li>
                        <li>Continued use of the system indicates your acceptance of any changes.</li>
                    </ul>

                    <h5 class="mt-4">8. Contact Information</h5>
                    <ul>
                        <li>Have questions? Reach out via <a href="mailto:admin@warathatulambiya.com" aria-label="Email admin">admin@warathatulambiya.com</a>.</li>
                        <li>Please include your full name, email, and any relevant context.</li>
                    </ul>

                    <p class="mt-4">
                        At Warathatul Ambiya, we strive to protect your personal data, support your learning journey, and uphold trust in all interactions—<em class="arabic-phrase">bi idhnillāh</em>.
                    </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary rounded-3" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}